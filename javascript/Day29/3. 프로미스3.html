<!DOCTYPE html>
<html lang="en">

<head>
    <title>í”„ë¡œë¯¸ìŠ¤3</title>
</head>

<body>
    <h2>í”„ë¡œë¯¸ìŠ¤3</h2>
    <script>
        function getBanana() {
            return new Promise((resolve) => {
                setTimeout(() => {
                    resolve('ðŸŒ')
                }, 1000)
            })
        }

        function getCherry() {
            return new Promise((resolve) => {
                setTimeout(() => {
                    resolve('ðŸ’')
                }, 3000)
            })
        }

        function getOrange() {
            return Promise.reject(new Error('ì˜¤ë Œì§€ëŠ” ë‹¤ íŒ”ë¦¼!'))
        }

        // ë°”ë‚˜ë‚˜ì™€ ì²´ë¦¬ë¥¼ ê°–ê³ ì˜¤ê¸°
        // ìˆœì°¨ì ìœ¼ë¡œ ì²˜ë¦¬ -> ì´ 4ì´ˆê°€ ê±¸ë¦¼
        // ë°”ë‚˜ë‚˜ì™€ ì²´ë¦¬ë¥¼ ë°°ì—´ì— ì €ìž¥í•´ì„œ ì½˜ì†”ì— ì¶œë ¥
        getBanana()     // ðŸŒ
            .then((banana) => getCherry()   // ðŸŒ ðŸ’
                .then((cherry) => [banana, cherry]))    // [ðŸŒ, ðŸ’]
            .then(console.log) // [ðŸŒ, ðŸ’]

        // Promise.all
        // ë³‘ë ¬ì ìœ¼ë¡œ í•œë²ˆì— ëª¨ë“  Promiseë“¤ì„ ì‹¤í–‰
        Promise.all([getBanana(), getCherry()])
            .then((fruits) => console.log('Promise.all: ', fruits))

        // í•˜ë‚˜ë¼ë„ ì‹¤íŒ¨í•˜ë©´ ì „ì²´ê°€ ì‹¤íŒ¨
        Promise.all([getBanana(), getCherry(), getOrange()])
            .then((fruits) => console.log('Error: ', fruits))
            .catch(console.log)

        // Promise.allSettled
        // ì—ëŸ¬ê°€ ë°œìƒí•˜ë”ë¼ë„ ëª¨ë“  promiseë“¤ì˜ ê²°ê³¼ë¥¼ ë°˜í™˜
        Promise.allSettled([getBanana(), getCherry(), getOrange()])
            .then((fruits) => console.log('Promise.allSettled: ', fruits))
            .catch(console.log)

        // Promise.race
        // ì£¼ì–´ì§„ Promise ì¤‘ì—ì„œ ê°€ìž¥ ë¹¨ë¦¬ ìˆ˜í–‰ëœ ê²ƒì„ ì¶œë ¥
        Promise.race([getBanana(), getCherry()])
            .then((fruit) => console.log('Promise.race: ', fruit))
            .catch(console.log)
    </script>
</body>

</html>